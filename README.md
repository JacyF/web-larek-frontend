# Проектная работа "Веб-ларек"

Это интернет-магазин, предлагающий товары для веб-разработчиков. Пользователи могут просматривать каталог продукции, добавлять товары в корзину и оформлять заказы.  

**Описание**  

В проекте реализован подход MVP (Model-View-Presenter), который обеспечивает строгое разделение задач между классами Model и View. Каждый из них имеет четкую зону ответственности:  

- **Model** — отвечает за загрузку данных через API, их сохранение и обработку информации, введенной пользователем.  
- **View** — отвечает за визуальное представление интерфейса, обеспечивает взаимодействие с пользователем и фиксирует события, происходящие в интерфейсе.  
- **EventEmitter** выполняет роль посредника (Presenter), соединяя модели данных и пользовательский интерфейс. Он обрабатывает события и управляет взаимодействием между слоями.  

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

**Описание базовых классов**

Класс Api имеет следующие свойства и методы.

Методы:

- handleResponse(response: Response): Promise<object> - обработчик ответа сервера.
- get(uri: string) - принимает изменяющеюся часть url-адреса, возвращает ответ от сервера.
- post(uri: string, data: object, method: ApiPostMethods = 'POST') - принимает изменяющеюся часть url-адреса, принимает данные в виде объекта для отправки на сервер, type ApiPostMethods = 'POST' | 'PUT' | 'DELETE'.


**Класс EventEmitter - брокер событий, implements от IEvents и имеет следующие методы.**

Класс EventEmitter реализует паттерн «Observer/Наблюдатель» и обеспечивает работу событий, его методы позволяют устанавливать и снимать слушатели событий, вызвать слушатели при возникновении события.

**Методы:**

- on - для подписки на событие.
- off - для отписки от события.
- emit - уведомления подписчиков о наступлении события соответственно.
- onAll - для подписки на все события.
- offAll - сброса всех подписчиков.
- trigger - генерирует заданное событие с заданными аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от класса EventEmitter.


**Описание классов Model**  

Классы Model отвечают за хранение и обработку данных, полученных от сервера и пользователя.  

### **Класс ApiModel**  
Этот класс является наследником класса `Api`. Он выполняет взаимодействие с сервером, включая передачу и получение данных.  

**Методы:**  
- `getListProductCard` — загружает с сервера массив объектов, представляющих карточки товаров.  
- `postOrderLot` — отправляет данные заказа на сервер и возвращает ответ о его статусе.  

### **Класс BasketModel**  
Этот класс предназначен для управления данными, которые вводит пользователь, в частности, товарами, добавленными в корзину.  

**Методы:**  
- `getCounter` — возвращает текущее количество товаров в корзине.  
- `getSumAllProducts` — подсчитывает и возвращает общую стоимость товаров в корзине в синапсах.  
- `setSelectedCard` — добавляет выбранный товар в корзину.  
- `deleteCardToBasket` — удаляет конкретный товар из корзины.  
- `clearBasketProducts` — очищает корзину, удаляя все товары.  

### **Класс DataModel**  
Служит для хранения данных о продуктах, загруженных с сервера.  

**Метод:**  
- `setPreview` — сохраняет данные о карточке товара, которую пользователь открыл для просмотра.  

### **Класс FormModel**  
Этот класс управляет данными, которые пользователь ввел для оформления заказа.  

**Методы:**  
- `setOrderAddress` — сохраняет адрес доставки, указанный пользователем.  
- `validateOrder` — проверяет корректность введенного адреса и выбранного метода оплаты.  
- `setOrderData` — сохраняет номер телефона и электронную почту пользователя.  
- `validateContacts` — проверяет правильность введенных телефона и почты.  
- `getOrderLot` — возвращает объект с данными о заказе, включая выбранные товары и информацию о пользователе.  

---

**Описание классов View**  

Классы View отвечают за отображение элементов страницы, взаимодействие с пользователем и обработку событий.  

### **Класс Basket**  
Управляет отображением корзины на странице.  

**Методы:**  
- `renderHeaderBasketCounter` — отображает текущее количество товаров в корзине.  
- `renderSumAllProducts` — отображает общую стоимость всех товаров в корзине.  

### **Класс BasketItens**  
Управляет отображением отдельных товаров в корзине.   

**Метод:**  
- `setPrice` — принимает числовое значение цены товара и возвращает его в формате строки.  


### **Класс Card**  
Отвечает за отображение карточки товара на странице.  

**Методы:**

- `setText` — принимает HTML-элемент и текстовое значение, устанавливая содержимое элемента.
- `cardCategory` — принимает строку и добавляет соответствующий className к элементу.
- `setPrice` — преобразует числовую цену товара в строковый формат.
- `notSale` — проверяет, есть ли у товара цена. Если цена отсутствует, покупка становится невозможной

### **Класс Order**  
Управляет содержимым модального окна, где пользователь выбирает способ оплаты и вводит адрес доставки.  

**Метод:**  
- `paymentSelection` — визуально выделяет выбранный метод оплаты.  

### **Класс Contacts**  
Управляет модальным окном для ввода пользователем телефона и электронной почты.  

**Метод:**  
- `valid` - активировать кнопку отправки только тогда, когда выполнены определённые условия. 


### **Класс Modal**  
Управляет отображением и закрытием модальных окон.  

**Методы:**  
- `open` — открывает модальное окно.  
- `close` — закрывает модальное окно.  

### **Класс Successful**  
Управляет отображением сообщения об успешно оформленном заказе в модальном окне.

### Список событий:

- **`products:loaded`**  
  Создает экземпляры класса карточек товаров с витрины и рендерит их на странице.  
  **Используется:** при успешной загрузке данных товаров с сервера.  

- **`basket:updated`**  
  Обновляет количество товаров и их сумму в корзине.  
  **Используется:** при добавлении, удалении или очистке товаров в корзине.  

- **`order:validated`**  
  Проверяет данные, введенные пользователем в форме заказа.  
  **Используется:** при нажатии кнопки "Подтвердить заказ".  

- **`modal:open`**  
  Открывает модальное окно.  
  **Используется:** для отображения форм ввода или подтверждения заказа.  

- **`modal:close`**  
  Закрывает текущее модальное окно.  
  **Используется:** при нажатии на кнопку закрытия или успешном выполнении действия.  

- **`contacts:submitted`**  
  Отправляет контактные данные (телефон, email) для дальнейшей обработки.  
  **Используется:** после проверки корректности данных пользователя.  

- **`success:order`**  
  Показывает сообщение об успешном оформлении заказа.  
  **Используется:** после успешной отправки заказа на сервер.

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
